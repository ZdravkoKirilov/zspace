---
id: hook-all-trades
display_name: "React: The hook of all trades"
type: article
featured_image: jack-trades.jpg
tags: [React, Front end, Clean code]

created_on: 2024-05-27
---

There's a repeating pattern I see in many React projects: a narrowly purposed
component gradually grows into a multi-headed monster doing too many things.
An example of polluted state could be as simple as keeping flags for various
floating elements and feedback indicators:

```jsx
const SomeComponent = () => {
    const [modalOpen, setModalOpen] = useState(false);
    const [isLoading, setIsLoading] = useState(false);
    const [isSuccess, setIsSuccess] = useState(false);
    const data = useFetchData(...);
    .... possibly other hooks

    const submitSomeData = () => {
        setIsLoading(true);
        ...
        setIsSuccess(true);
    };

    <div>
        {data.map(...)}
        ....

        <button
          onClick={() => setModalOpen(true)}
          disabled={isLoading}
        >
          {isLoading ? 'Loading...' : 'Edit'}
        </button>

        <Modal open={modalOpen} onSubmit={submitSomeData} ... />

        <Toast open={isSuccess} ... />

    </div>
}
```

We can tidy this up though by colocating UI and actions into a single custom hook -
this is something people sometimes don't realize - nothing stops us from returning
JSX from them!

```jsx

const useSubmitModal = () => {
    const [isOpen, setIsOpen] = useState(false);
    const [isLoading, setIsLoading] = useState(false);
    const [isSuccess, setIsSuccess] = useState(false);

    const submitSomeData = () => {
        setIsLoading(true);
        ...
        setIsSuccess(true);

        // the modal self closes when the operation completes - consumers
        // no longer need to take care
        setIsOpen(false);
    };

    return {
        UI: (
          <>
             <Modal open={isOpen}>
             <Toast open={isSuccess} ... />
          </>
        ),

        // the modal can be opened by consumers
        open: () => setIsOpen(true),

        isLoading,
        isSuccess,
        ... whatever else consumers might need
    }
}

// the component is much tidier

const SomeComponent = () => {
    const data = useFetchData(...);
    ... other hooks

    const { UI, isLoading, open, ... } = useSubmitModal();

    <div>
        {data.map(...)}
        ....

        <button
          onClick={open}
          disabled={isLoading}
        >
           {isLoading ? 'Loading...' : 'Edit'}
        </button>

        {UI}

    </div>
}
```
